wx.ready(function() {
  wx.chooseWXPay({
    timestamp: "<%= @wxpay_order[:timeStamp] %>",
    nonceStr: "<%= @wxpay_order[:nonceStr] %>",
    package: "<%= @wxpay_order[:package] %>",
    signType: "<%= @wxpay_order[:signType] %>",
    paySign: "<%= @wxpay_order[:paySign] %>",
    success: function(res) {
      alert(res);
      window.location.href = '<%= wait_my_orders_url(@order.id) %>';
    },
    error: function(e) {
      alert(e)
    }
  });
});
